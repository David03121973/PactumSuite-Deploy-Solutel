import{r as d,k as h,L as w,y as f,z as p,I as S,J as A,A as K,Y as L,M as F,N as q,H as z,K as C,B as E}from"#entry";const N={class:"relative w-full"},R=["placeholder","disabled","aria-expanded","aria-activedescendant"],T=["id","onMousedown","onMouseenter","aria-selected"],H={__name:"SelectSearch",props:{options:{type:Array,required:!0},labelKey:{type:[String,Function],required:!0},valueKey:{type:String,required:!0},modelValue:[String,Number],placeholder:{type:String,default:"Buscar..."},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:k}){const l=o,x=k,t=d(""),r=d(!1),n=d(-1),c=`dropdown-${Math.random().toString(36).substr(2,9)}`,g=d(null);function i(e){return typeof l.labelKey=="function"?l.labelKey(e):typeof l.labelKey=="string"?e[l.labelKey]:""}const s=h(()=>t.value?l.options.filter(e=>String(i(e)).toLowerCase().includes(t.value.toLowerCase())):l.options),y=e=>`${c}-option-${e}`,V=h(()=>n.value>=0?y(n.value):void 0);w(()=>l.modelValue,e=>{if(e!=null){const a=l.options.find(u=>String(u[l.valueKey])===String(e));a?t.value=i(a):t.value=""}else t.value=""},{immediate:!0}),w(()=>l.options,()=>{if(l.modelValue!==void 0&&l.modelValue!==null){const e=l.options.find(a=>String(a[l.valueKey])===String(l.modelValue));e&&(t.value=i(e))}},{immediate:!0});const b=e=>{l.disabled||(x("update:modelValue",e[l.valueKey]),t.value=i(e),r.value=!1)},m=e=>{if(r.value||(r.value=!0),s.value.length===0)return;let a=n.value+e;a<0&&(a=s.value.length-1),a>=s.value.length&&(a=0),n.value=a},B=()=>{n.value>=0&&n.value<s.value.length&&b(s.value[n.value])},M=()=>{setTimeout(()=>{r.value=!1},100)},D=()=>{l.disabled||(r.value=!0),t.value&&g.value.select()},I=e=>{if(!l.disabled)switch(e.key){case"ArrowDown":e.preventDefault(),m(1);break;case"ArrowUp":e.preventDefault(),m(-1);break;case"Enter":e.preventDefault(),B();break;case"Escape":r.value=!1,n.value=-1;break}};return(e,a)=>(p(),f("div",N,[S(K("input",{ref_key:"inputRef",ref:g,type:"text","onUpdate:modelValue":a[0]||(a[0]=u=>t.value=u),placeholder:o.placeholder,class:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o.disabled,onFocus:D,onInput:a[1]||(a[1]=u=>!o.disabled&&(r.value=!0)),onKeydown:I,onBlur:M,"aria-expanded":r.value.toString(),"aria-controls":c,"aria-activedescendant":V.value},null,40,R),[[A,t.value]]),S(K("ul",{id:c,class:"absolute z-10 w-full bg-white border border-gray-300 rounded-lg mt-1 max-h-60 overflow-auto shadow-lg",role:"listbox"},[(p(!0),f(F,null,q(s.value,(u,v)=>(p(),f("li",{key:u[o.valueKey],id:y(v),class:C(["px-4 py-2 cursor-pointer",v===n.value?"bg-accent/30":"hover:bg-gray-100"]),onMousedown:z($=>b(u),["prevent"]),onMouseenter:$=>n.value=v,role:"option","aria-selected":String(o.modelValue)===String(u[o.valueKey])},E(i(u)),43,T))),128))],512),[[L,r.value&&s.value.length>0]])]))}};export{H as _};
